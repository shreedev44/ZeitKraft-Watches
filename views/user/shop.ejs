<%- include('../layout/header') -%>
<title>ZEITKRAFT | Shop</title>

    <%- include('../layout/userSideCss') %>
</head>

<body>
<%- include('../layout/navbar') -%>

<section class="breadcrumb-option">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="breadcrumb__text">
                    <h4>Shop</h4>
                    <div class="breadcrumb__links">
                        <a href="/home">Home</a>
                        <span>Shop</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="shop spad">
    <div class="container">
        <div class="row"  id="sort-pagination-div">
            <div class="col-lg-3">
                <div class="shop__sidebar">
                    <div class="shop__sidebar__search">
                        <form action="/shop" method="get">
                            <input type="text" name="search" placeholder="Search..." id="search-box">
                            <button type="submit"><span class="icon_search"></span></button>
                        </form>
                    </div>
                    <div class="shop__sidebar__accordion">
                        <div class="accordion" id="accordionExample">
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseOne">Categories</a>
                                </div>
                                <div id="collapseOne" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul class="nice-scroll" id="category-filter">
                                                <% categories.forEach((category) => { %>
                                                <li><a href="#"><%= category.categoryName %></a></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseTwo">Brands</a>
                                </div>
                                <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                <% brands.forEach((brand) => { %>
                                                <li><a href="#"><%= brand.brandName %></a></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseFive">Types</a>
                                </div>
                                <div id="collapseFive" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                <li><a href="#">Automatic Watches</a></li>
                                                <li><a href="#">Manual Watches</a></li>
                                                <li><a href="#">Quartz Watches</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseTwo">Dial Colors</a>
                                </div>
                                <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                <% dialColors.forEach((color) => { %>
                                                <li><a href="#"><%= color %></a></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseTwo">Strap Colors</a>
                                </div>
                                <div id="collapseTwo" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__brand">
                                            <ul>
                                                <% strapColors.forEach((color) => { %>
                                                <li><a href="#"><%= color %></a></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-heading">
                                    <a data-toggle="collapse" data-target="#collapseThree">Filter Price</a>
                                </div>
                                <div id="collapseThree" class="collapse show" data-parent="#accordionExample">
                                    <div class="card-body">
                                        <div class="shop__sidebar__price">
                                            <ul>
                                                <li><a href="#">$0.00 - $50.00</a></li>
                                                <li><a href="#">$50.00 - $100.00</a></li>
                                                <li><a href="#">$100.00 - $150.00</a></li>
                                                <li><a href="#">$150.00 - $200.00</a></li>
                                                <li><a href="#">$200.00 - $250.00</a></li>
                                                <li><a href="#">250.00+</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9" id="sort-pagination-div">
                <div class="shop__product__option">
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="shop__product__option__left">
                                <p><%= products.length %> results</p>
                            </div>
                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="shop__product__option__right mr-2">
                                <p>Sort by:</p>
                                <select id="select">
                                    <option id="default-desc" value="addedDate">Select</option>
                                    <option id="price-asc" value="price">Price ↑</option>
                                    <option id="price-desc" value="price">Price ↓</option>
                                    <option id="name-asc" value="brand.brandName">Product Name ↑</option>
                                    <option id="name-desc" value="brand.brandName">Product Name ↓</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row" id="parent-div">
                    <% products.forEach((product) => {  %>
                        <div class="col-lg-4 col-md-6 col-sm-6 ftco-animate">
                            <div class="product">
                                <a href="/product-details?productId=<%= product._id %>" class="img-prod"><img class="img-fluid" src="/uploads/products/<%= product.productPic1 %>" alt="Product image">
                                    <div class="overlay"></div>
                                </a>
                                <div class="text py-3 px-3">
                                    <h3><a class="text-primary" href="/product-details?productId=<%= product._id %>"><%= products[products.indexOf(product)].brand[0].brandName + " " + product.productName %></a></h3>
                                    <p></p>
                                    <h6><%= product.model %></h6>
                                    <p></p>
                                    <div class="d-flex">
                                        <div class="pricing">
                                            <% const formattedPrice = product.price.toLocaleString(); %>
                                            <p class="price"><span>&#x20b9; <%= formattedPrice %></span></p>
                                        </div>
                                        <div class="rating">
                                            <p class="text-right">
                                                <span class="ion-ios-star-outline"></span>
                                                <span class="ion-ios-star-outline"></span>
                                                <span class="ion-ios-star-outline"></span>
                                                <span class="ion-ios-star-outline"></span>
                                                <span class="ion-ios-star-outline"></span>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-around">
                                        <% if(product.stock > 5){ %>
                                        <span class="text-success">In stock</span>
                                        <% }else if(product.stock <= 5 && product.stock >0) {%>
                                        <span class="text-warning">Few stock left</span>
                                        <% }else{ %>
                                        <span class="text-danger">Out of stock</span>
                                        <% } %>
                                        <p class="text-dark fw-bolder"><%= product.type %></p>
                                    </div>
                                    <% if(product.stock > 0){ %>
                                    <p class="bottom-area d-flex px-3">
                                        <a data-product-id="<%= product._id %>" class="add-to-cart text-center py-2 mr-1"><span data-product-id="<%= product._id %>" class="add-to-cart" style="cursor: pointer;">Add to cart <i class="ion-ios-add ml-1"></i></span></a>
                                        <a data-product-id="<%= product._id %>" class="add-to-wishlist buy-now text-center py-2" style="cursor: pointer;">Wishlist<span><i class="ion-ios-heart ml-1"></i></span></a>
                                    </p>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                    <% }) %>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product__pagination">
                            <% for(let i = 1; i <= totalPages; i++){ %>
                            <a class="<%= pageNumber == i ? 'active' : '' %> pagination" href="#" data-page="<%= i %>"><%= i %></a>
                            <% } %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<%- include('../layout/pageFooter') -%>
<%- include('../layout/userSideScripts') %>

<script src="/UserAssets/js/shop.js"></script>
<%- include('../layout/footer') -%>